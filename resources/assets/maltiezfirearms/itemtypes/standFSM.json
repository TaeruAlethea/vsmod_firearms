{
  "code": "standFSM",
  "behaviors": [
    {
      "name": "firearms.finitestatemachine",
      "properties": {
        "initialState": "unloaded",
        "systems": [
          {
            "code": "sound_system",
            "class": "Sound",
            "attributes": {
              "sounds": [
                {
                  "code": "test_sound_0",
                  "location": "maltiezfirearms:sounds/musket/musket-short-click"
                }
              ]
            }
          },
          {
            "code": "reload_system",
            "class": "Reload",
            "attributes": {}
          },
          {
            "code": "shooting_system",
            "class": "Shooting",
            "attributes": {
              "ammoSource": "reload_system"
            }
          },
          {
            "code": "animation_system",
            "class": "VariantsAnimation",
            "attributes": {
              "soundSystem": "sound_system",
              "animations": [
                {
                  "code": "draw",
                  "firstVariant": 2,
                  "lastVariant": 4,
                  "duration": 1500,
                  "sounds": [
                    {
                      "variant": 3,
                      "code": "test_sound_0"
                    },
                    {
                      "variant": 4,
                      "code": "test_sound_0"
                    }
                  ]
                },
                {
                  "code": "ease",
                  "firstVariant": 1,
                  "lastVariant": 1,
                  "duration": 0
                }
              ]
            }
          },
          {
            "code": "transform_animation_system",
            "class": "TransformAnimation",
            "attributes": {
              "animations": [
                {
                  "code": "aiming",
                  "duration": 500,
                  "fpTransform": {
                    "translation": { "x": -0.5, "y": 0.35, "z": 0 },
                    "rotation": { "x": 0.0, "y": 0.0, "z": 0.0 },
                    "origin": { "x": 0, "y": 0, "z": 0 },
                    "scale": 1
                  },
                  "tpTransform": {
                    "translation": { "x": -0.1, "y": 0.5, "z": 0.2 },
                    "rotation": { "x": 105.0, "y": 90.0, "z": -90.0 },
                    "origin": { "x": 0, "y": 0, "z": 0 },
                    "scale": 1
                  }
                }
              ]
            }
          },
          {
            "code": "requirement_system",
            "class": "Requirements",
            "attributes": {
              "requirementSets": [
                {
                  "code": "test",
                  "requirements": [
                    {
                      "code": "linenpatch",
                      "amount": 1
                    }
                  ]
                }
              ]
            }
          }
        ],
        "operations": [
          {
            "code": "shoot",
            "class": "Instant",
            "attributes": {
              "input": "mouse_right_up",
              "inputsToIntercept": [],
              "states": [
                {
                  "initial": "loaded",
                  "final": "unloaded"
                }
              ],
              "systems": [
                {
                  "code": "shooting_system",
                  "attributes": {}
                },
                {
                  "code": "animation_system",
                  "attributes": {
                    "code": "ease"
                  }
                },
                {
                  "code": "transform_animation_system",
                  "attributes": {
                    "code": "aiming",
                    "mode": "backward"
                  }
                }
              ]
            }
          },
          {
            "code": "ease",
            "class": "Instant",
            "attributes": {
              "input": [
                "dropped",
                "handle_slot_change"
              ],
              "inputsToIntercept": [],
              "states": [
                {
                  "initial": "loaded",
                  "final": "unloaded"
                }
              ],
              "systems": [
                {
                  "code": "reload_system",
                  "attributes": {
                    "ammoCode": "arrow",
                    "action": "put"
                  }
                },
                {
                  "code": "animation_system",
                  "attributes": {
                    "code": "ease"
                  }
                },
                {
                  "code": "transform_animation_system",
                  "attributes": {
                    "code": "aiming",
                    "mode": "backward"
                  }
                }
              ]
            }
          },
          {
            "code": "reload",
            "class": "Delayed",
            "attributes": {
              "delay_ms": 1500,
              "inputsToIntercept": [],
              "inputsToHandle": {
                "initial": [
                  "mouse_right_down",
                  "key_r_down"
                ],
                "cancel": [
                  "mouse_right_up",
                  "key_r_up",
                  "handle_slot_change",
                  "dropped"
                ]
              },
              "states": [
                {
                  "initial": "unloaded",
                  "cancel": "unloaded",
                  "final": "loaded"
                }
              ],
              "systems": {
                "initial": [
                  {
                    "code": "reload_system",
                    "attributes": {
                      "ammoCode": "arrow",
                      "action": "take"
                    }
                  },
                  {
                    "code": "animation_system",
                    "attributes": {
                      "code": "draw"
                    }
                  },
                  {
                    "code": "transform_animation_system",
                    "attributes": {
                      "code": "aiming",
                      "mode": "forward"
                    }
                  },
                  {
                    "code": "requirement_system",
                    "attributes": {
                      "code": "test",
                      "type": "check"
                    }
                  }
                ],
                "cancel": [
                  {
                    "code": "reload_system",
                    "attributes": {
                      "ammoCode": "arrow",
                      "action": "put"
                    }
                  },
                  {
                    "code": "animation_system",
                    "attributes": {
                      "code": "ease"
                    }
                  },
                  {
                    "code": "transform_animation_system",
                    "attributes": {
                      "code": "aiming",
                      "mode": "backward"
                    }
                  }
                ],
                "final": [
                  {
                    "code": "requirement_system",
                    "attributes": {
                      "code": "test",
                      "type": "take"
                    }
                  },
                  {
                    "code": "transform_animation_system",
                    "attributes": {
                      "code": "aiming",
                      "mode": "stop"
                    }
                  }
                ]
              }
            }
          }
        ],
        "inputs": [
          {
            "code": "prevent_slot_change",
            "class": "SlotChange",
            "attributes": {
              "type": "prevent"
            }
          },
          {
            "code": "handle_slot_change",
            "class": "SlotChange",
            "attributes": {
              "type": "handle"
            }
          },
          {
            "code": "mouse_right_down",
            "class": "MouseKey",
            "attributes": {
              "key": "Right",
              "type": "pressed"
            }
          },
          {
            "code": "mouse_right_up",
            "class": "MouseKey",
            "attributes": {
              "key": "Right",
              "type": "released"
            }
          },
          {
            "code": "dropped",
            "class": "ItemDropped",
            "attributes": {
              "handle": false
            }
          },
          {
            "code": "key_r_down",
            "class": "Key",
            "attributes": {
              "key": "R",
              "type": "pressed"
            }
          },
          {
            "code": "key_r_up",
            "class": "Key",
            "attributes": {
              "key": "R",
              "type": "released"
            }
          }
        ]
      }
    }
  ],
  "creativeinventory": {
    "maltiezfirearms": [
      "*"
    ]
  },
  "variantgroups": [
    {
      "code": "type",
      "states": [
        "simple",
        "crude",
        "long",
        "recurve"
      ]
    }
  ],
  "class": "Item",
  "maxstacksize": 1,
  "durabilityByType": {
    "*-crude": 180,
    "*-simple": 240,
    "*-long": 750,
    "*-recurve": 600
  },
  "shape": {
    "base": "game:item/tool/bow/{type}",
    "alternates": [
      {
        "base": "game:item/tool/bow/{type}-charge1"
      },
      {
        "base": "game:item/tool/bow/{type}-charge2"
      },
      {
        "base": "game:item/tool/bow/{type}-charge3"
      }
    ]
  },
  "tool": "bow",
  "attributes": {
    "damageByType": {
      "*-crude": 3,
      "*-simple": 3.25,
      "*-long": 3.75,
      "*-recurve": 4
    },
    "accuracyBonusByType": {
      "*-crude": -0.05,
      "*-simple": 0,
      "*-long": 0.2,
      "*-recurve": 0.3
    },
    "toolrackTransformByType": {
      "*-long": {
        "rotation": {
          "x": 2,
          "y": 5,
          "z": 0
        },
        "translation": {
          "x": 0.2,
          "y": 0.95
        },
        "scale": 1.76
      },
      "*": {
        "rotation": {
          "x": 2,
          "y": 5,
          "z": 0
        },
        "translation": {
          "y": 0.63
        },
        "scale": 1.25
      }
    },
    "groundStorageTransformByType": {
      "bow-simple": {
        "translation": {
          "x": -0.4,
          "y": -0.03,
          "z": 0.315
        },
        "rotation": {
          "x": 26,
          "y": -180,
          "z": -90
        },
        "scale": 0.88
      },
      "bow-crude": {
        "translation": {
          "x": -0.4,
          "y": -0.11,
          "z": 0.345
        },
        "rotation": {
          "x": 26,
          "y": -180,
          "z": -90
        }
      },
      "bow-long": {
        "translation": {
          "x": -0.45,
          "y": 0.1,
          "z": 0.29
        },
        "rotation": {
          "x": 26,
          "y": -180,
          "z": -90
        },
        "scale": 0.88
      },
      "*": {
        "translation": {
          "x": -0.4,
          "y": 0.1,
          "z": 0.28
        },
        "rotation": {
          "x": 20,
          "y": -180,
          "z": -90
        },
        "scale": 0.83
      }
    }
  },
  "fpHandTransformByType": {
    "*-recurve": {
      "translation": {
        "x": 0,
        "y": 0.5,
        "z": 0
      },
      "rotation": {
        "x": 4,
        "y": 1,
        "z": 84
      },
      "origin": {
        "x": 0.5,
        "y": 0,
        "z": 0.5
      },
      "scale": 2.42
    },
    "*-long": {
      "translation": {
        "x": 0,
        "y": 0.5,
        "z": 0
      },
      "rotation": {
        "x": 4,
        "y": 1,
        "z": 84
      },
      "origin": {
        "x": 0.5,
        "y": 0,
        "z": 0.5
      },
      "scale": 3.41
    },
    "*": {
      "translation": {
        "x": 0,
        "y": 0.5,
        "z": 0
      },
      "rotation": {
        "x": 4,
        "y": 1,
        "z": 84
      },
      "origin": {
        "x": 0.5,
        "y": 0,
        "z": 0.5
      },
      "scale": 2.91
    }
  },
  "guiTransformByType": {
    "*-crude": {
      "translation": {
        "x": 0,
        "y": 0,
        "z": 0
      },
      "rotation": {
        "x": -95,
        "y": 45,
        "z": 37
      },
      "origin": {
        "x": 0.47,
        "y": 0,
        "z": 0.55
      },
      "scale": 2.35
    },
    "*-long": {
      "translation": {
        "x": 0,
        "y": 0,
        "z": 0
      },
      "rotation": {
        "x": -135,
        "y": 25,
        "z": 41
      },
      "origin": {
        "x": 0.47,
        "y": 0,
        "z": 0.59
      },
      "scale": 1.35
    },
    "*-recurve": {
      "translation": {
        "x": 0,
        "y": 0,
        "z": 0
      },
      "rotation": {
        "x": -129,
        "y": 25,
        "z": 41
      },
      "origin": {
        "x": 0.47,
        "y": 0,
        "z": 0.55
      },
      "scale": 1.36
    },
    "*": {
      "translation": {
        "x": 0,
        "y": 0,
        "z": 0
      },
      "rotation": {
        "x": -129,
        "y": 25,
        "z": 41
      },
      "origin": {
        "x": 0.47,
        "y": 0,
        "z": 0.55
      },
      "scale": 1.64
    }
  },
  "groundTransform": {
    "translation": {
      "x": 0,
      "y": 0,
      "z": 0
    },
    "rotation": {
      "x": 0,
      "y": 0,
      "z": 0
    },
    "origin": {
      "x": 0.5,
      "y": 0,
      "z": 0.5
    },
    "scale": 4.8
  },
  "tpHandTransformByType": {
    "*-recurve": {
      "translation": {
        "x": -0.52,
        "y": 0.01,
        "z": -0.54
      },
      "rotation": {
        "x": 107,
        "y": 11,
        "z": 10
      },
      "origin": {
        "x": 0.5,
        "y": 0,
        "z": 0.5
      },
      "scale": 0.93
    },
    "*-long": {
      "translation": {
        "x": -0.39,
        "y": -0.02,
        "z": -0.4
      },
      "rotation": {
        "x": 107,
        "y": 11,
        "z": 10
      },
      "origin": {
        "x": 0.5,
        "y": 0,
        "z": 0.5
      },
      "scale": 1.29
    },
    "*-simple": {
      "translation": {
        "x": -0.48,
        "y": 0.03,
        "z": -0.44
      },
      "rotation": {
        "x": 105,
        "y": 9,
        "z": 4
      },
      "origin": {
        "x": 0.5,
        "y": 0,
        "z": 0.5
      },
      "scale": 1.15
    },
    "*": {
      "translation": {
        "x": -0.48,
        "y": -0.02,
        "z": -0.44
      },
      "rotation": {
        "x": 107,
        "y": 11,
        "z": 10
      },
      "origin": {
        "x": 0.5,
        "y": 0,
        "z": 0.5
      },
      "scale": 1.15
    }
  }
}